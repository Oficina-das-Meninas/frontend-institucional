<div class="flex flex-col items-center pt-45 pb-20 mx-auto bg-pink-50/50">

  <div class="max-w-2xl text-center mb-14 px-6">
    <h1 class="font-bold text-3xl md:text-5xl mb-4">Seja um voluntário</h1>
    <p class="text-base lg:text-xl leading-relaxed">
      Sua ajuda pode mudar o futuro de dezenas de meninas.
      Junte-se aos nossos profissionais e doe seu tempo e conhecimento
      para transformar vidas.
    </p>
    <div class="flex justify-center mt-6">
      <div class="w-16 h-1 rounded-full bg-[var(--mat-sys-primary)] inline-flex"></div>
    </div>
  </div>

  <form [formGroup]="volunteerForm" class="flex flex-col items-center w-full max-w-5xl px-4">

    <div class="flex flex-col md:flex-row md:gap-x-8">
      <div class="flex flex-col w-full gap-4">
        <div class="flex flex-col mb-4">
          <h3 class="text-lg font-semibold mb-2">Informações Pessoais</h3>
          <p class="mb-2 text-sm text-gray-600">Preencha seus dados para facilitar o contato.</p>
        </div>

        <mat-form-field appearance="outline">
          <mat-label>Nome completo</mat-label>
          <input maxlength="50" matInput formControlName="name" (keypress)="onlyLetters($event)" >
          @if (volunteerForm.get('name')?.invalid) {
            <mat-error>{{ formHelperService.getErrorMessage(volunteerForm, "name") }}</mat-error>
          }
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>CPF</mat-label>
          <input matInput formControlName="cpf" mask="000.000.000-00" />
          @if (volunteerForm.get('cpf')?.invalid) {
            <mat-error>{{ formHelperService.getErrorMessage(volunteerForm, "cpf") }}</mat-error>
          }
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Conte como você gostaria de ajudar</mat-label>

          <textarea
            matInput
            #proposal
            formControlName="proposal"
            cdkTextareaAutosize
            #autosize="cdkTextareaAutosize"
            cdkAutosizeMinRows="5"
            maxlength="500"
            placeholder="Descreva o que você pode oferecer: habilidades, tipos de atividades, disponibilidade em eventos...">
          ></textarea>
          <mat-hint align="end">{{ proposal.value.length || 0 }} / 500</mat-hint>
          @if (volunteerForm.get('proposal')?.invalid) {
            <mat-error>{{ formHelperService.getErrorMessage(volunteerForm, "proposal") }}</mat-error>
          }
        </mat-form-field>
      </div>

      <mat-divider vertical class="hidden md:block" />

      <div class="flex flex-col mt-4 md:mt-0 w-full">
        <div class="flex flex-col">
          <h3 class="text-lg font-semibold mb-2">Disponibilidade de Horários</h3>
          <p class="mb-6 text-sm text-gray-600">Pelo menos um dia deve ser selecionado.</p>

          <div formGroupName="availability" class="grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-4 mt-4">
            @for (day of days; track day.key) {
              <mat-form-field appearance="outline">
                <mat-label>{{ day.label }}</mat-label>
                <mat-select [formControlName]="day.key">
                  @for (period of periods; track period.value) {
                    <mat-option [value]="period.value">{{ period.label }}</mat-option>
                  }
                </mat-select>
              </mat-form-field>
            }
          </div>
        </div>

      </div>
    </div>
    <button mat-flat-button color="success" (click)="onSubmit()" [disabled]="volunteerForm.invalid" class="mt-5 w-full sm:w-auto">
      <div class="flex items-center gap-2">
        <span>Enviar mensagem</span>
        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="currentColor">
          <path
            d="M20.52 3.48A11.82 11.82 0 0 0 12 .01a11.99 11.99 0 0 0-10.6 17.8L.05 24l6.3-1.65A11.94 11.94 0 0 0 12 24c6.62 0 12-5.38 12-12 0-3.19-1.24-6.2-3.48-8.52zM12 22a9.94 9.94 0 0 1-5.07-1.37l-.36-.21-3.73.98 1-3.64-.24-.37A9.95 9.95 0 0 1 12 2c5.51 0 10 4.49 10 10s-4.49 10-10 10zm5.07-7.5c-.28-.14-1.65-.81-1.91-.9-.26-.1-.45-.14-.64.14-.19.28-.73.9-.9 1.09-.17.19-.34.21-.62.07-.28-.14-1.18-.43-2.25-1.38-.83-.74-1.38-1.65-1.54-1.93-.16-.28-.02-.43.12-.57.12-.12.28-.31.42-.47.14-.16.19-.26.28-.45.09-.19.05-.35-.02-.49-.07-.14-.64-1.55-.88-2.12-.23-.56-.47-.48-.64-.49h-.55c-.19 0-.49.07-.75.35s-.98.95-.98 2.31.99 2.68 1.13 2.87c.14.19 1.95 2.98 4.74 4.18.66.28 1.18.45 1.59.58.67.21 1.28.18 1.76.11.54-.08 1.65-.67 1.88-1.32.23-.65.23-1.2.16-1.32-.07-.12-.26-.19-.54-.33z" />
        </svg>
      </div>
    </button>

  </form>

</div>
